2. Get User's Highest Vault Level
Add this function to calculate the user's task allocation:
javascriptasync function getUserVaultLevel(userId) {
    try {
        const vaultsSnapshot = await db.collection('users').doc(userId).collection('vaults').get();
        const activeVaults = vaultsSnapshot.docs.map(doc => doc.data()).filter(v => v.status === 'active');
        
        if (activeVaults.length === 0) {
            // No active vaults - user gets 1 task (beginner)
            return {
                level: 0,
                dailyTasks: 1,
                taskMultiplier: 1.0,
                planName: 'Beginner'
            };
        }
        
        // Get highest level vault
        let highestLevel = 0;
        let highestMultiplier = 1.0;
        let highestTasks = 1;
        
        activeVaults.forEach(vault => {
            const planKey = Object.keys(vaultPlans).find(key => 
                vaultPlans[key].name === vault.planName
            );
            
            if (planKey) {
                const plan = vaultPlans[planKey];
                if (plan.level > highestLevel) {
                    highestLevel = plan.level;
                    highestTasks = plan.dailyTasks;
                    highestMultiplier = plan.taskMultiplier;
                }
            }
        });
        
        return {
            level: highestLevel,
            dailyTasks: highestTasks,
            taskMultiplier: highestMultiplier,
            planName: activeVaults[activeVaults.length - 1].planName
        };
    } catch (error) {
        console.error('Error getting user vault level:', error);
        return {
            level: 0,
            dailyTasks: 1,
            taskMultiplier: 1.0,
            planName: 'Beginner'
        };
    }
}
3. Update Task Loading Logic
Replace the task filtering section in loadYouTubeTasks():
javascriptasync function loadYouTubeTasks(today, container) {
    try {
        // Get user's vault level
        const userVaultInfo = await getUserVaultLevel(currentUser.id);
        const allowedTaskCount = userVaultInfo.dailyTasks;
        
        const tasksSnapshot = await db.collection('tasks')
            .where('isActive', '==', true)
            .get();
        
        const allTasks = tasksSnapshot.docs.map(doc => ({
            id: doc.id,
            ...doc.data()
        }));

        // Check completed today
        const todayString = new Date().toDateString();
        const todaySubmissionsSnapshot = await db.collection('taskSubmissions')
            .where('userId', '==', currentUser.id)
            .where('date', '==', todayString)
            .get();
        
        const completedTaskIds = todaySubmissionsSnapshot.docs.map(doc => doc.data().taskId);
        
        // Filter: correct day + not completed + limit by vault level
        const availableTasks = allTasks.filter(task => 
            (task.day === today || task.day === 'all') && 
            !completedTaskIds.includes(task.id)
        ).slice(0, allowedTaskCount); // LIMIT BY VAULT LEVEL

        // Display user's task allocation
        const taskAllocationInfo = document.createElement('div');
        taskAllocationInfo.style.cssText = `
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border: 2px solid #0ea5e9;
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
            text-align: center;
        `;
        taskAllocationInfo.innerHTML = `
            <div style="font-size: 0.875rem; color: #0c4a6e; margin-bottom: 0.5rem;">
                <strong>ðŸ“‹ Your Plan Level:</strong> ${userVaultInfo.planName}
            </div>
            <div style="font-size: 1rem; font-weight: 600; color: #0369a1;">
                Daily Tasks Available: ${allowedTaskCount} / ${completedTaskIds.length} Completed
            </div>
            ${userVaultInfo.level > 0 ? `
                <div style="font-size: 0.875rem; color: #0c4a6e; margin-top: 0.5rem;">
                    Task Reward Multiplier: <strong>${(userVaultInfo.taskMultiplier * 100).toFixed(0)}%</strong>
                </div>
            ` : ''}
        `;
        
        if (container.firstChild) {
            container.insertBefore(taskAllocationInfo, container.firstChild);
        } else {
            container.appendChild(taskAllocationInfo);
        }

        if (availableTasks.length === 0) {
            container.innerHTML += '<p class="text-center" style="color: var(--success); padding: 2rem;">ðŸŽ‰ Great job! You\'ve completed all available tasks for today.</p>';
        } else {
            // ... rest of task display code
        }
    } catch (error) {
        console.error('Error loading YouTube tasks:', error);
    }
}
4. Apply Task Reward Multiplier
Update awardTaskReward() to apply multiplier:
javascriptasync function awardTaskReward(taskId, baseReward, taskTitle) {
    try {
        if (!currentUser.isActivated) {
            alert('Account not activated. Please complete your registration first.');
            return;
        }

        // Get user's vault level and apply multiplier
        const userVaultInfo = await getUserVaultLevel(currentUser.id);
        const adjustedReward = Math.floor(baseReward * userVaultInfo.taskMultiplier);
        
        // Rest of the function with adjustedReward instead of baseReward
        const todayString = new Date().toDateString();
        const submissionQuery = await db.collection('taskSubmissions')
            .where('userId', '==', currentUser.id)
            .where('taskId', '==', taskId)
            .where('date', '==', todayString)
            .get();

        if (!submissionQuery.empty) {
            alert('You have already completed this task today!');
            return;
        }

        const userDoc = await db.collection('users').doc(currentUser.id).get();
        const userData = userDoc.data();
        const currentBalance = userData.balance || 0;

        await db.collection('users').doc(currentUser.id).update({
            balance: currentBalance + adjustedReward,
            totalTaskEarnings: (userData.totalTaskEarnings || 0) + adjustedReward
        });

        // ... rest of reward logic
    } catch (error) {
        console.error('Error awarding task reward:', error);
        alert('Failed to award reward: ' + error.message);
    }
}
5. Display User's Task Allocation in Dashboard
Add this to the home section to show current allocation:
javascriptasync function displayUserTaskAllocation() {
    try {
        const userVaultInfo = await getUserVaultLevel(currentUser.id);
        const allocationDiv = document.createElement('div');
        allocationDiv.style.cssText = `
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            border: 2px solid #22c55e;
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
        `;
        allocationDiv.innerHTML = `
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h4 style="margin: 0 0 0.5rem 0; color: #166534;">ðŸ“‹ Your Task Allocation</h4>
                    <p style="margin: 0; color: #15803d; font-size: 0.875rem;">
                        Plan: <strong>${userVaultInfo.planName}</strong> | 
                        Daily Tasks: <strong>${userVaultInfo.dailyTasks}</strong> | 
                        Reward Multiplier: <strong>${(userVaultInfo.taskMultiplier * 100).toFixed(0)}%</strong>
                    </p>
                </div>
                <div style="text-align: right;">
                    <button class="btn btn-success" style="padding: 0.5rem 1rem; font-size: 0.875rem;" onclick="showSection('vault')">
                        Upgrade Plan
                    </button>
                </div>
            </div>
        `;
        
        const homeSection = document.getElementById('homeSection');
        if (homeSection && homeSection.querySelector('#taskAllocationInfo') === null) {
            allocationDiv.id = 'taskAllocationInfo';
            homeSection.insertBefore(allocationDiv, homeSection.firstChild);
        }
    } catch (error) {
        console.error('Error displaying task allocation:', error);
    }
}
